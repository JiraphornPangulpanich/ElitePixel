<?php
session_start(); // เริ่มต้น session
include('db_connect.php'); // เชื่อมต่อฐานข้อมูล

// ตรวจสอบว่าได้ส่งค่า 'add' มาใน URL หรือไม่ (แสดงว่าเป็นการเพิ่มสินค้าลงในตะกร้า)
if (isset($_GET['add'])) {
    $itemId = $_GET['add']; // รับค่า Id ของสินค้าที่จะเพิ่ม

    // ตรวจสอบว่า session['cart'] ถูกสร้างหรือยัง ถ้ายังให้สร้างขึ้น
    if (!isset($_SESSION['cart'])) {
        $_SESSION['cart'] = array(); // ถ้ายังไม่มีตะกร้าใน session ให้สร้างตะกร้าขึ้น
    }

    // ตรวจสอบว่าในตะกร้ามีสินค้านี้อยู่แล้วหรือไม่
    if (isset($_SESSION['cart'][$itemId])) {
        $_SESSION['cart'][$itemId]++; // ถ้ามีสินค้าก็เพิ่มจำนวนสินค้า
    } else {
        $_SESSION['cart'][$itemId] = 1; // ถ้ายังไม่มีสินค้านี้ในตะกร้า ให้เพิ่มสินค้าลงไป 1 ชิ้น
    }

    // เมื่อเพิ่มสินค้าสำเร็จแล้วให้เปลี่ยนเส้นทางไปหน้า cart1.php
    header('Location: cart1.php');
    exit();
} else {
    // ถ้าไม่ได้ส่งค่า 'add' มาใน URL
    echo "ไม่มีสินค้าให้เพิ่ม";
}
?>
